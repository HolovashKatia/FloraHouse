<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Кошик — FloraHouse</title>
<link rel="stylesheet" href="styles.css" />
<style>
body {
background: #fcf8f4;
font-family: sans-serif;
}
.container {
max-width: 800px;
margin: 40px auto;
background: #fff;
border-radius: 18px;
box-shadow: 0 2px 12px #0001;
padding: 32px;
}
h1 {
margin-top: 0;
font-size: 2rem;
text-align: center;
}
#cartList {
list-style: none;
padding: 0;
margin: 0 0 24px 0;
}
#cartList li {
display: flex;
align-items: center;
gap: 16px;
margin-bottom: 16px;
border-bottom: 1px solid #eee;
padding-bottom: 12px;
}
#cartList img {
width: 60px;
height: 60px;
object-fit: cover;
border-radius: 8px;
background: #f3f6f2;
}
.cart-title {
font-weight: 600;
font-size: 1.1rem;
}
.cart-price {
font-weight: 600;
color: #234d2a;
font-size: 1.1rem;
margin-left: 16px;
}
.cart-qty {
display: flex;
align-items: center;
gap: 6px;
margin-left: 16px;
}
.cart-qty-btn {
background: #234d2a;
color: #fff;
border: none;
border-radius: 4px;
width: 28px;
height: 28px;
font-size: 1.2rem;
cursor: pointer;
transition: background .2s;
}
.cart-qty-btn:hover {
background: #1a3a1e;
}
.cart-qty-value {
min-width: 24px;
text-align: center;
font-weight: 600;
}
.cart-remove {
margin-left: 16px;
background: #e74c3c;
color: #fff;
border: none;
border-radius: 6px;
padding: 4px 12px;
cursor: pointer;
font-size: 0.95rem;
transition: background .2s;
}
.cart-remove:hover {
background: #c0392b;
}
.cart-total {
text-align: right;
font-size: 1.2rem;
font-weight: 600;
margin-top: 24px;
}
.empty-cart {
text-align: center;
color: #888;
font-size: 1.1rem;
margin: 40px 0;
}
.back-link {
display: inline-block;
margin-bottom: 24px;
color: #234d2a;
text-decoration: none;
font-weight: 600;
font-size: 1rem;
border-bottom: 1px dashed #234d2a;
transition: color .2s;
}
.back-link:hover {
color: #1a3a1e;
}
.order-form {
margin-top: 32px;
max-width: 400px;
margin-left: auto;
margin-right: auto;
background: #f3f6f2;
border-radius: 12px;
padding: 24px 20px;
box-shadow: 0 1px 6px #0001;
}
.order-form label {
display: block;
margin-bottom: 8px;
font-weight: 600;
}
.order-form input, .order-form select {
width: 100%;
padding: 8px 10px;
margin-bottom: 16px;
border-radius: 6px;
border: 1px solid #ccc;
font-size: 1rem;
}
.order-form button {
width: 100%;
background: #234d2a;
color: #fff;
border: none;
border-radius: 8px;
padding: 10px 0;
font-size: 1.1rem;
cursor: pointer;
transition: background .2s;
}
.order-form button:hover {
background: #1a3a1e;
}
.order-success {
text-align: center;
color: #234d2a;
font-size: 1.2rem;
margin-top: 32px;
background: #e6f0e6;
border-radius: 12px;
padding: 24px 10px;
}
.hidden {
display: none !important;
}
</style>
</head>
<body>
<div class="container">
<a href="catalog.html" class="back-link">&larr; Повернутися до каталогу</a>
<h1>Кошик</h1>
<ul id="cartList"></ul>
<div id="cartTotal" class="cart-total"></div>
<div id="emptyCart" class="empty-cart" style="display:none;">Кошик порожній.</div>

<form id="orderForm" class="order-form" style="display:none;">
  <label for="firstName">Ім'я</label>
  <input type="text" id="firstName" required>
  <label for="lastName">Прізвище</label>
  <input type="text" id="lastName" required>
  <label for="phone">Телефон</label>
  <input type="tel" id="phone" required pattern="^\+?[\d\s\-]{7,}$" placeholder="+380...">
  <label for="deliveryType">Спосіб доставки</label>
  <select id="deliveryType" required>
    <option value="">Оберіть спосіб доставки</option>
    <option value="pickup">Самовивіз</option>
    <option value="nova_poshta">Відправлення Новою Поштою</option>
  </select>
  <div id="npFields" class="hidden">
    <label for="city">Місто</label>
    <input type="text" id="city">
    <label for="branch">Відділення Нової Пошти</label>
    <input type="text" id="branch">
  </div>
  <button type="submit">Оформити замовлення</button>
</form>
<div id="orderSuccess" class="order-success" style="display:none;">
  Дякуємо за замовлення! Ми зв'яжемося з вами найближчим часом.
</div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const cartList = document.getElementById('cartList');
  const cartTotal = document.getElementById('cartTotal');
  const emptyCart = document.getElementById('emptyCart');
  const orderForm = document.getElementById('orderForm');
  const orderSuccess = document.getElementById('orderSuccess');
  const firstNameInput = document.getElementById('firstName');
  const lastNameInput = document.getElementById('lastName');
  const phoneInput = document.getElementById('phone');
  const deliveryType = document.getElementById('deliveryType');
  const npFields = document.getElementById('npFields');
  const cityInput = document.getElementById('city');
  const branchInput = document.getElementById('branch');

  function renderCart() {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cartList.innerHTML = '';
    let total = 0;

    if (cart.length === 0) {
      cartTotal.textContent = '';
      emptyCart.style.display = 'block';
      orderForm.style.display = 'none';
      return;
    } else {
      emptyCart.style.display = 'none';
      orderForm.style.display = 'block';
    }

    cart.forEach((item, idx) => {
      if (!item.qty) item.qty = 1;
      let priceNum = parseFloat(item.price.replace(/[^\d.]/g, ''));
      total += priceNum * item.qty;

      const li = document.createElement('li');
      li.innerHTML = `
        <img src="${item.img}" alt="">
        <span class="cart-title">${item.title}</span>
        <span class="cart-price">${item.price}</span>
        <div class="cart-qty">
          <button class="cart-qty-btn" data-idx="${idx}" data-action="minus">−</button>
          <span class="cart-qty-value">${item.qty}</span>
          <button class="cart-qty-btn" data-idx="${idx}" data-action="plus">+</button>
        </div>
        <button class="cart-remove" data-idx="${idx}">Видалити</button>
      `;
      cartList.appendChild(li);
    });

    cartTotal.textContent = 'Сума: ' + total + ' ₴';

    // Видалення товару
    document.querySelectorAll('.cart-remove').forEach(btn => {
      btn.addEventListener('click', function() {
        let idx = parseInt(btn.getAttribute('data-idx'));
        cart.splice(idx, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
      });
    });

    // Зміна кількості
    document.querySelectorAll('.cart-qty-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        let idx = parseInt(btn.getAttribute('data-idx'));
        let action = btn.getAttribute('data-action');
        if (action === 'plus') {
          cart[idx].qty = (cart[idx].qty || 1) + 1;
        } else if (action === 'minus') {
          cart[idx].qty = (cart[idx].qty || 1) - 1;
          if (cart[idx].qty < 1) cart[idx].qty = 1;
        }
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
      });
    });
  }

  renderCart();

  // Показ/приховування полів для Нової Пошти
  deliveryType.addEventListener('change', function() {
    if (deliveryType.value === 'nova_poshta') {
      npFields.classList.remove('hidden');
      cityInput.required = true;
      branchInput.required = true;
    } else {
      npFields.classList.add('hidden');
      cityInput.required = false;
      branchInput.required = false;
    }
  });

  // Оформлення замовлення
  orderForm.addEventListener('submit', function(e) {
    e.preventDefault();

    // Перевірка полів
    let errors = [];
    if (!firstNameInput.value.trim()) errors.push("Введіть ім'я");
    if (!lastNameInput.value.trim()) errors.push("Введіть прізвище");
    if (!phoneInput.value.trim()) errors.push("Введіть телефон");
    if (!deliveryType.value) errors.push("Оберіть спосіб доставки");
    if (deliveryType.value === 'nova_poshta') {
      if (!cityInput.value.trim()) errors.push("Вкажіть місто");
      if (!branchInput.value.trim()) errors.push("Вкажіть відділення Нової Пошти");
    }
    if (errors.length > 0) {
      alert(errors.join('\n'));
      return;
    }

    // Тут можна відправити дані на сервер (через fetch/AJAX)
    // Зараз просто показуємо повідомлення і очищаємо кошик

    orderForm.style.display = 'none';
    orderSuccess.style.display = 'block';
    localStorage.removeItem('cart');
    cartList.innerHTML = '';
    cartTotal.textContent = '';
  });
});
</script>
</body>
</html>